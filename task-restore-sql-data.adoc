---
sidebar: sidebar 
permalink: task-restore-sql-data.html 
keywords: restore, Azure, Amazon Web services, Microsoft SQL Server database 
summary: 您可以将 SQL Server 数据库从云还原到内部 SnapCenter Server 。 
---
= 还原 SQL Server 数据库
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
您可以将SQL Server数据库还原到原始位置或备用位置。


NOTE: 不支持单文件还原(SFR)、日志备份恢复以及可用性组重新密封。

.步骤
. 在BlueXP UI中、单击*保护*>*备份和恢复*>*应用程序*。
. 在 * 筛选依据 * 字段中，选择筛选器 * 类型 * ，然后从下拉列表中选择 * SQL * 。
. 单击 * 查看详细信息 * 以查看所有可用备份。
. 选择备份并单击 * 还原 * 。
. 在还原选项页面中、指定要还原数据库文件的位置。
+
|===
| 如果您 ... | 执行此操作 ... 


 a| 
要还原到原始位置
 a| 
.. 选择*恢复到原始位置*。
.. 如果快照位于归档存储中、请选择从归档存储还原数据的优先级。
.. 单击 * 下一步 * 。




 a| 
希望临时还原到另一个存储、然后将还原的文件复制到原始位置
 a| 
.. 选择*恢复到原始位置*。
.. 如果快照位于归档存储中、请选择从归档存储还原数据的优先级。
.. 选择*更改存储位置*。
+
如果选择*更改存储位置*，则可以在目标卷上附加后缀。如果未选中此复选框、则默认情况下会将*_restore *附加到目标卷。

.. 单击 * 下一步 * 。
.. 在存储映射页面中、指定临时存储从对象存储还原的数据的备用存储位置详细信息。
.. 单击 * 下一步 * 。




 a| 
要还原到备用位置
 a| 
.. 选择*恢复到备用位置*。
.. 如果快照位于归档存储中、请选择从归档存储还原数据的优先级。
.. 单击 * 下一步 * 。
.. 在目标主机页面中、选择主机名、提供数据库名称(可选)、选择实例并指定还原路径。
+

NOTE: 备用路径中提供的文件扩展名必须与原始数据库文件的文件扩展名相同。

.. 单击 * 下一步 * 。




 a| 
希望临时还原到另一个存储、然后将还原的文件复制到备用位置
 a| 
.. 选择*恢复到备用位置*。
.. 如果快照位于归档存储中、请选择从归档存储还原数据的优先级。
.. 选择*更改存储位置*。
+
如果选择*更改存储位置*，则可以在目标卷上附加后缀。如果未选中此复选框、则默认情况下会将*_restore *附加到目标卷。

.. 单击 * 下一步 * 。
.. 在存储映射页面中、指定临时存储从对象存储还原的数据的备用存储位置详细信息。
.. 单击 * 下一步 * 。
.. 在目标主机页面中、选择主机名、提供数据库名称(可选)、选择实例并指定还原路径。
+

NOTE: 备用路径中提供的文件扩展名必须与原始数据库文件的文件扩展名相同。

.. 单击 * 下一步 * 。


|===
. 在*操作前*选择中，选择以下选项之一：
+
** 选择 * 在还原期间覆盖同名数据库 * 以还原同名数据库。
** 选择 * 保留 SQL 数据库复制设置 * 以还原数据库并保留现有复制设置。


. 在*操作后*部分中，要指定用于还原其他事务日志的数据库状态，请选择以下选项之一：
+
** 如果要立即还原所有必要的备份，请选择 * 可操作，但不可用 * 。
+
这是默认行为，通过回滚未提交的事务使数据库做好使用准备。在创建备份之前，您无法还原其他事务日志。

** 选择 * 不可操作，但可用 * 可使数据库不可操作，而不回滚未提交的事务。
+
可以还原其他事务日志。在恢复数据库之前，您无法使用它。

** 选择 * 只读模式和可用 * 可使数据库保持只读模式。
+
此选项将撤消未提交的事务，但会将撤消的操作保存在备用文件中，以便可以还原恢复效果。

+
如果启用了撤消目录选项，则会还原更多事务日志。如果事务日志的还原操作失败，则可以回滚所做的更改。SQL Server 文档包含详细信息。



. 单击 * 下一步 * 。
. 查看详细信息并单击 * 还原 * 。



NOTE: 如果还原操作未完成、请勿再次尝试还原过程、直到作业监控器显示还原操作失败为止。如果在作业监控器显示还原操作失败之前再次尝试还原过程、还原操作将再次失败。当您看到作业监控器状态为"失败"时、您可以再次尝试还原过程。
