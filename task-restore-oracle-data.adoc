---
sidebar: sidebar 
permalink: task-restore-oracle-data.html 
keywords: restore, Azure, Amazon Web services, Oracle database 
summary: 您可以将 Oracle 数据库从云还原到内部 SnapCenter 服务器。 
---
= 使用 BlueXP 备份和恢复来恢复 Oracle 数据库
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
您可以使用 BlueXP 备份和恢复将 Oracle 数据库还原到原始位置或备用位置。对于RAC数据库、数据将还原到创建备份的内部节点。

仅支持具有控制文件还原的完整数据库。如果归档日志不在 AFS 中，则应指定包含恢复所需归档日志的位置。


IMPORTANT: 不支持单文件还原(SFR)。

* 步骤 *

. 在BlueXP UI中、单击*保护*>*备份和恢复*>*应用程序*。
. 在 * 筛选依据 * 字段中，选择筛选器 * 类型 * ，然后从下拉列表中选择 * Oracle * 。
. 单击与要还原的数据库对应的 * 查看详细信息 * ，然后单击 * 还原 * 。
. 在还原选项页面中、指定要还原数据库文件的位置。
+
|===
| 如果您 ... | 执行此操作 ... 


 a| 
要还原到原始位置
 a| 
.. 选择*恢复到原始位置*。
.. 如果快照位于归档存储中、请选择从归档存储还原数据的优先级。
.. 单击 * 下一步 * 。
.. 如果要将数据库的状态更改为执行还原和恢复操作所需的状态、请选择*数据库状态*。
+
数据库从高到低的各种状态包括打开，挂载，启动和关闭。

+
*** 如果数据库处于较高状态、但要执行还原操作、必须将此状态更改为较低状态、则必须选中此复选框。
*** 如果数据库处于较低的状态，但要执行还原操作，必须将其更改为较高的状态，则即使未选中此复选框，数据库状态也会自动更改。
*** 如果数据库处于打开状态，并且要还原，数据库需要处于挂载状态，则只有选中此复选框后，数据库状态才会更改。


.. 指定恢复范围。
+
*** 如果要恢复到上一个事务，请选择*所有日志*。
*** 如果要恢复到特定的scn，请选择*Until scn (系统变更号)*。
*** 如果要恢复到特定数据和时间，请选择*日期和时间*。
+
必须指定数据库主机时区的日期和时间。

*** 如果不想恢复，请选择*不恢复*。


.. 如果归档日志不在活动文件系统中、则应指定包含恢复所需归档日志的位置。
.. 如果要在恢复后打开数据库，请选中此复选框。
+
在 RAC 设置中，恢复后仅打开用于恢复的 RAC 实例。





 a| 
希望临时还原到另一个存储、然后将还原的文件复制到原始位置
 a| 
.. 选择*恢复到原始位置*。
.. 如果快照位于归档存储中、请选择从归档存储还原数据的优先级。
.. 选择*更改存储位置*。
+
如果选择*更改存储位置*，则可以在目标卷上附加后缀。如果未选中此复选框、则默认情况下会将*_restore *附加到目标卷。

.. 单击 * 下一步 * 。
.. 在存储映射页面中、指定临时存储从对象存储还原的数据的备用存储位置详细信息。
+
如果您选择内部ONTAP系统、并且未配置与对象存储的集群连接、则系统会提示您输入有关对象存储的追加信息。

.. 单击 * 下一步 * 。
.. 如果要将数据库的状态更改为执行还原和恢复操作所需的状态、请选择*数据库状态*。
+
数据库从高到低的各种状态包括打开，挂载，启动和关闭。

+
*** 如果数据库处于较高状态、但要执行还原操作、必须将此状态更改为较低状态、则必须选中此复选框。
*** 如果数据库处于较低的状态，但要执行还原操作，必须将其更改为较高的状态，则即使未选中此复选框，数据库状态也会自动更改。
*** 如果数据库处于打开状态，并且要还原，数据库需要处于挂载状态，则只有选中此复选框后，数据库状态才会更改。


.. 指定恢复范围。
+
*** 如果要恢复到上一个事务，请选择*所有日志*。
*** 如果要恢复到特定的scn，请选择*Until scn (系统变更号)*。
*** 如果要恢复到特定数据和时间，请选择*日期和时间*。
+
必须指定数据库主机时区的日期和时间。

*** 如果不想恢复，请选择*不恢复*。


.. 如果归档日志不在活动文件系统中、则应指定包含恢复所需归档日志的位置。
.. 如果要在恢复后打开数据库，请选中此复选框。
+
在 RAC 设置中，恢复后仅打开用于恢复的 RAC 实例。





 a| 
要还原到备用位置
 a| 
.. 选择*恢复到备用位置*。
.. 如果快照位于归档存储中、请选择从归档存储还原数据的优先级。
.. 如果要还原到备用存储、请执行以下操作：
+
... 选择*更改存储位置*。
+
如果选择*更改存储位置*，则可以在目标卷上附加后缀。如果未选中此复选框、则默认情况下会将*_restore *附加到目标卷。

... 单击 * 下一步 * 。
... 在存储映射页面中、指定需要还原对象存储中的数据的备用存储位置详细信息。


.. 单击 * 下一步 * 。
.. 在目标主机页面中、选择要挂载数据库的主机。
+
... (可选)对于NAS环境、指定要将从对象存储还原的卷导出到的主机的FQDN或IP地址。
... (可选)对于SAN环境、指定要将从对象存储还原的卷的LUN映射到的主机启动程序。


.. 单击 * 下一步 * 。


|===
. 查看详细信息并单击 * 还原 * 。


.结果
"*还原到备用位置"选项可在给定主机上挂载选定备份。您应手动启动数据库。

挂载备份后、您将无法再次挂载它、直到卸载为止。您可以在用户界面中使用*Unmount*选项卸载备份。

有关如何启动Oracle数据库的信息、请参见、 https://kb.netapp.com/Advice_and_Troubleshooting/Cloud_Services/Cloud_Manager/How_to_bring_up_Oracle_Database_in_another_NFS_host_after_mounting_storage_from_backup_in_Cloud_Backup_for_Applications["知识库文章"]。


NOTE: 如果还原操作未完成、请勿再次尝试还原过程、直到作业监控器显示还原操作失败为止。如果在作业监控器显示还原操作失败之前再次尝试还原过程、还原操作将再次失败。当您看到作业监控器状态为"失败"时、您可以再次尝试还原过程。
